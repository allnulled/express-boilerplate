[
  {
    "tabla": "Usuario",
    "atributos": [],
    "composicion": [
      {
        "sentencia": "columna",
        "columna": "id",
        "tipo": "INTEGER",
        "detalles": "PRIMARY KEY AUTOINCREMENT",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "nombre",
        "tipo": "VARCHAR",
        "detalles": "(255) UNIQUE",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "contrasenya",
        "tipo": "VARCHAR",
        "detalles": "(255)",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "correo",
        "tipo": "VARCHAR",
        "detalles": "(255)",
        "atributos": []
      }
    ],
    "script": "CREATE TABLE Usuario (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    nombre VARCHAR(255) UNIQUE,\n    contrasenya VARCHAR(255),\n    correo VARCHAR(255)\n);"
  },
  {
    "tabla": "Permiso",
    "atributos": [],
    "composicion": [
      {
        "sentencia": "columna",
        "columna": "id",
        "tipo": "INTEGER",
        "detalles": "PRIMARY KEY AUTOINCREMENT",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "nombre",
        "tipo": "VARCHAR",
        "detalles": "(255)",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "descripcion",
        "tipo": "VARCHAR",
        "detalles": "(511)",
        "atributos": []
      }
    ],
    "script": "\n\nCREATE TABLE Permiso (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    nombre VARCHAR(255),\n    descripcion VARCHAR(511)\n);"
  },
  {
    "tabla": "Permiso_de_usuario",
    "atributos": [],
    "composicion": [
      {
        "sentencia": "columna",
        "columna": "id",
        "tipo": "INTEGER",
        "detalles": "PRIMARY KEY AUTOINCREMENT",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "id_usuario",
        "tipo": "INTEGER",
        "detalles": "",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "id_permiso",
        "tipo": "INTEGER",
        "detalles": "",
        "atributos": []
      },
      {
        "sentencia": "clave foránea",
        "columna": "id_usuario",
        "tabla_foranea": "Usuario",
        "columna_foranea": "id"
      },
      {
        "sentencia": "clave foránea",
        "columna": "id_permiso",
        "tabla_foranea": "Permiso",
        "columna_foranea": "id"
      }
    ],
    "script": "\n\nCREATE TABLE Permiso_de_usuario (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    id_usuario INTEGER,\n    id_permiso INTEGER,\n    FOREIGN KEY (id_usuario) REFERENCES Usuario (id),\n    FOREIGN KEY (id_permiso) REFERENCES Permiso (id)\n);"
  },
  {
    "tabla": "Sesion",
    "atributos": [],
    "composicion": [
      {
        "sentencia": "columna",
        "columna": "id",
        "tipo": "INTEGER",
        "detalles": "PRIMARY KEY AUTOINCREMENT",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "token",
        "tipo": "VARCHAR",
        "detalles": "(100)",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "id_usuario",
        "tipo": "INTEGER",
        "detalles": "",
        "atributos": []
      },
      {
        "sentencia": "clave foránea",
        "columna": "id_usuario",
        "tabla_foranea": "Usuario",
        "columna_foranea": "id"
      }
    ],
    "script": "\n\nCREATE TABLE Sesion (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    token VARCHAR(100),\n    id_usuario INTEGER,\n    FOREIGN KEY (id_usuario) REFERENCES Usuario (id)\n);"
  },
  {
    "tabla": "Blog_post",
    "atributos": [],
    "composicion": [
      {
        "sentencia": "columna",
        "columna": "id",
        "tipo": "INTEGER",
        "detalles": "PRIMARY KEY AUTOINCREMENT",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "titulo",
        "tipo": "VARCHAR",
        "detalles": "(255)",
        "atributos": [
          "tipo: Texto normal",
          "tipo-en-formulario: text",
          "descripcion: El título del post del blog.",
          "maximo-de-texto: 100",
          "minimo-de-texto: 1"
        ]
      },
      {
        "sentencia": "columna",
        "columna": "subtitulo",
        "tipo": "VARCHAR",
        "detalles": "(512)",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "contenido",
        "tipo": "TEXT",
        "detalles": "",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "fecha_de_creacion",
        "tipo": "DATETIME",
        "detalles": "",
        "atributos": []
      }
    ],
    "script": "\nCREATE TABLE Blog_post (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  titulo VARCHAR(255) /*\n    @tipo: Texto normal\n    @tipo-en-formulario: text\n    @descripcion: El título del post del blog.\n    @maximo-de-texto: 100\n    @minimo-de-texto: 1\n  */,\n  subtitulo VARCHAR(512),\n  contenido TEXT,\n  fecha_de_creacion DATETIME\n);"
  },
  {
    "tabla": "Blog_comentario_de_post",
    "atributos": [],
    "composicion": [
      {
        "sentencia": "columna",
        "columna": "id",
        "tipo": "INTEGER",
        "detalles": "PRIMARY KEY AUTOINCREMENT",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "contenido",
        "tipo": "TEXT",
        "detalles": "",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "fecha_de_creacion",
        "tipo": "DATETIME",
        "detalles": "",
        "atributos": []
      }
    ],
    "script": "\n\nCREATE TABLE Blog_comentario_de_post (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  contenido TEXT,\n  fecha_de_creacion DATETIME\n);"
  },
  {
    "tabla": "Ejemplo_de_columna",
    "atributos": [],
    "composicion": [
      {
        "sentencia": "columna",
        "columna": "id",
        "tipo": "INTEGER",
        "detalles": "PRIMARY KEY AUTOINCREMENT",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "color",
        "tipo": "VARCHAR",
        "detalles": "(32)",
        "atributos": [
          "es_tipo: color"
        ]
      }
    ],
    "script": "\nCREATE TABLE Ejemplo_de_columna (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  color VARCHAR(32) /*\n    @es_tipo: color\n  */\n);"
  },
  {
    "tabla": "Tabla_1",
    "atributos": [
      "es_seleccionable",
      "es_insertable",
      "es_actualizable",
      "es_eliminable",
      {
        "tipo": "comprobar_permiso",
        "al": [
          "select",
          "insert",
          "update",
          "delete"
        ],
        "si": "@tiene_permiso(data, \"permiso de administración\")",
        "entonces": "@@prohibir(data, \"Se necesita permiso de administración para esta operación.\")"
      },
      {
        "tipo": "comprobar_permiso",
        "al": [
          "select",
          "insert",
          "update",
          "delete"
        ],
        "si": "@tiene_permiso(data, \"permiso de administración\")",
        "entonces": "@@prohibir(data, \"Se requieren permisos específicos para esta operación\")"
      }
    ],
    "composicion": [
      {
        "sentencia": "columna",
        "columna": "id",
        "tipo": "INTEGER",
        "detalles": "PRIMARY KEY AUTOINCREMENT",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "nombre",
        "tipo": "VARCHAR",
        "detalles": "(100)",
        "atributos": []
      }
    ],
    "script": "\n\nCREATE TABLE Tabla_1 /*\n  @es_seleccionable\n  @es_insertable\n  @es_actualizable\n  @es_eliminable\n  @comprobar_permiso:\n    al        select | insert | update | delete\n    si        @tiene_permiso(data, \"permiso de administración\")\n    entonces  @@prohibir(data, \"Se necesita permiso de administración para esta operación.\")\n  @comprobar_permiso:\n    al        select | insert | update | delete\n    si        @tiene_permiso(data, \"permiso de administración\")\n    entonces  @@prohibir(data, \"Se requieren permisos específicos para esta operación\")\n  */ (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  nombre VARCHAR(100)\n);"
  },
  {
    "tabla": "Tabla_2",
    "atributos": [
      "es_seleccionable",
      "es_insertable",
      "es_actualizable",
      "es_eliminable"
    ],
    "composicion": [
      {
        "sentencia": "columna",
        "columna": "id",
        "tipo": "INTEGER",
        "detalles": "PRIMARY KEY AUTOINCREMENT",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "nombre_privado",
        "tipo": "VARCHAR",
        "detalles": "(100)",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "nombre_publico",
        "tipo": "VARCHAR",
        "detalles": "(100)",
        "atributos": [
          {
            "tipo": "comprobar_restriccion",
            "entidad": "no es seleccionable",
            "si": "@no_tiene_permiso(data, \"permiso de administración\")"
          }
        ]
      },
      {
        "sentencia": "columna",
        "columna": "nombre_no_filtrable",
        "tipo": "VARCHAR",
        "detalles": "(100)",
        "atributos": [
          {
            "tipo": "comprobar_restriccion",
            "entidad": "no es filtrable",
            "si": "@no_tiene_permiso(data, \"permiso de administración\")"
          }
        ]
      },
      {
        "sentencia": "columna",
        "columna": "nombre_no_ordenable",
        "tipo": "VARCHAR",
        "detalles": "(100)",
        "atributos": [
          {
            "tipo": "comprobar_restriccion",
            "entidad": "no es ordenable",
            "si": "@no_tiene_permiso(data, \"permiso de administración\")"
          }
        ]
      },
      {
        "sentencia": "columna",
        "columna": "nombre_no_insertable",
        "tipo": "VARCHAR",
        "detalles": "(100)",
        "atributos": [
          {
            "tipo": "comprobar_restriccion",
            "entidad": "no es insertable",
            "si": "@no_tiene_permiso(data, \"permiso de administración\")"
          }
        ]
      },
      {
        "sentencia": "columna",
        "columna": "nombre_no_actualizable",
        "tipo": "VARCHAR",
        "detalles": "(100)",
        "atributos": [
          {
            "tipo": "comprobar_restriccion",
            "entidad": "no es actualizable",
            "si": "@no_tiene_permiso(data, \"permiso de administración\")"
          }
        ]
      }
    ],
    "script": "\n\nCREATE TABLE Tabla_2 /*\n  @es_seleccionable\n  @es_insertable\n  @es_actualizable\n  @es_eliminable\n  */ (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  nombre_privado VARCHAR(100),\n  nombre_publico VARCHAR(100) /*\n    @comprobar_restriccion: no es seleccionable si @no_tiene_permiso(data, \"permiso de administración\")\n  */,\n  nombre_no_filtrable VARCHAR(100) /*\n    @comprobar_restriccion: no es filtrable si @no_tiene_permiso(data, \"permiso de administración\")\n  */,\n  nombre_no_ordenable VARCHAR(100) /*\n    @comprobar_restriccion: no es ordenable si @no_tiene_permiso(data, \"permiso de administración\")\n  */,\n  nombre_no_insertable VARCHAR(100) /*\n    @comprobar_restriccion: no es insertable si @no_tiene_permiso(data, \"permiso de administración\")\n  */,\n  nombre_no_actualizable VARCHAR(100) /*\n    @comprobar_restriccion: no es actualizable si @no_tiene_permiso(data, \"permiso de administración\")\n  */\n);"
  },
  {
    "tabla": "Tabla_3",
    "atributos": [],
    "composicion": [
      {
        "sentencia": "columna",
        "columna": "id",
        "tipo": "INTEGER",
        "detalles": "PRIMARY KEY AUTOINCREMENT",
        "atributos": []
      },
      {
        "sentencia": "columna",
        "columna": "id_usuario",
        "tipo": "INTEGER",
        "detalles": "",
        "atributos": [
          {
            "tipo": "interceptar",
            "eval": " $interceptors.Columns.fijar_id_de_usuario_al_insertar(data, id_column, this);"
          },
          {
            "tipo": "interceptar",
            "eval": " $interceptors.Columns.fijar_id_de_usuario_al_actualizar(data, id_column, this);"
          },
          {
            "tipo": "interceptar",
            "eval": " $interceptors.Columns.es_actualizable_si_id_usuario_coincide_con(data, id_column, this);"
          }
        ]
      },
      {
        "sentencia": "columna",
        "columna": "creado_en",
        "tipo": "DATETIME",
        "detalles": "",
        "atributos": [
          {
            "tipo": "interceptar",
            "eval": " $interceptors.Columns.fijar_fecha_actual_al_insertar(data, id_column, this);"
          }
        ]
      },
      {
        "sentencia": "columna",
        "columna": "creado_por",
        "tipo": "INTEGER",
        "detalles": "",
        "atributos": [
          {
            "tipo": "interceptar",
            "eval": " $interceptors.Columns.fijar_id_de_usuario_al_insertar(data, id_column, this);"
          }
        ]
      },
      {
        "sentencia": "columna",
        "columna": "actualizado_en",
        "tipo": "DATETIME",
        "detalles": "",
        "atributos": [
          {
            "tipo": "interceptar",
            "eval": " $interceptors.Columns.fijar_fecha_actual_al_actualizar(data, id_column, this);"
          }
        ]
      },
      {
        "sentencia": "columna",
        "columna": "actualizado_por",
        "tipo": "INTEGER",
        "detalles": "",
        "atributos": [
          {
            "tipo": "interceptar",
            "eval": " $interceptors.Columns.fijar_id_de_usuario_al_actualizar(data, id_column, this);"
          }
        ]
      },
      {
        "sentencia": "clave foránea",
        "columna": "id_usuario",
        "tabla_foranea": "Usuario",
        "columna_foranea": "id"
      },
      {
        "sentencia": "clave foránea",
        "columna": "actualizado_por",
        "tabla_foranea": "Usuario",
        "columna_foranea": "id"
      },
      {
        "sentencia": "clave foránea",
        "columna": "creado_por",
        "tabla_foranea": "Usuario",
        "columna_foranea": "id"
      }
    ],
    "script": "\n\nCREATE TABLE Tabla_3 (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  id_usuario INTEGER /*\n    @interceptar: $interceptors.Columns.fijar_id_de_usuario_al_insertar(data, id_column, this);\n    @interceptar: $interceptors.Columns.fijar_id_de_usuario_al_actualizar(data, id_column, this);\n    @interceptar: $interceptors.Columns.es_actualizable_si_id_usuario_coincide_con(data, id_column, this);\n  */,\n  creado_en DATETIME /*\n    @interceptar: $interceptors.Columns.fijar_fecha_actual_al_insertar(data, id_column, this);\n  */,\n  creado_por INTEGER /*\n    @interceptar: $interceptors.Columns.fijar_id_de_usuario_al_insertar(data, id_column, this);\n  */,\n  actualizado_en DATETIME /*\n    @interceptar: $interceptors.Columns.fijar_fecha_actual_al_actualizar(data, id_column, this);\n  */,\n  actualizado_por INTEGER /*\n    @interceptar: $interceptors.Columns.fijar_id_de_usuario_al_actualizar(data, id_column, this);\n  */,\n  FOREIGN KEY (id_usuario) REFERENCES Usuario (id),\n  FOREIGN KEY (actualizado_por) REFERENCES Usuario (id),\n  FOREIGN KEY (creado_por) REFERENCES Usuario (id)\n);"
  }
]